{% extends "base_site.html" %}
{% load wagtailcore_tags %}
{% block title %}Careers — {{ page.get_site.site_name|default:'BISK' }}{% endblock %}
{% block content %}
    <h1 class="text-3xl font-semibold mb-4">{{ page.title|default:'Open Positions' }}</h1>
    <form method="get" class="mb-4 flex gap-2 items-center">
        <select name="dept" class="select select-bordered select-sm">
            <option value="">All departments</option>
            {% for d in departments %}
                <option value="{{ d.name }}"
                        {% if request.GET.dept == d.name %}selected{% endif %}>{{ d.name }}</option>
            {% endfor %}
        </select>
        <button class="btn btn-sm">Filter</button>
    </form>
    <div class="grid md:grid-cols-2 xl:grid-cols-3 gap-4">
        {% for job in jobs %}
            <a href="{% pageurl job %}" class="card bg-base-100 border border-base-300 hover:shadow-md transition">
                <div class="card-body">
                    <div class="flex items-center justify-between">
                        <h3 class="card-title text-lg">{{ job.title }}</h3>
                        {% if job.closing_date %}
                            <span class="badge badge-outline">Closes {{ job.closing_date }}</span>{% endif %}
                    </div>
                    <div class="text-sm opacity-80 flex flex-wrap gap-2">
                        {% if job.department %}<span class="badge badge-ghost">{{ job.department }}</span>{% endif %}
                        {% if job.location %}<span class="badge badge-ghost">{{ job.location }}</span>{% endif %}
                        {% if job.employment_type %}
                            <span class="badge badge-ghost">{{ job.employment_type }}</span>{% endif %}
                    </div>
                    <span class="link link-primary text-sm mt-1">View role →</span>
                </div>
            </a>
        {% empty %}
            <div class="text-sm opacity-70">No open positions.</div>
        {% endfor %}
    </div>
{% endblock %}
