{% load wagtailsettings_tags %}
{% get_settings use_default_site=True %}
{% with ux=settings.website.UXSettings %}
    <footer class="border-t border-base-300 mt-12">
        <div class="footer-grid"
             style="--px: {{ ux.footer_pad_x_px }}px; --py: {{ ux.footer_pad_y_px }}px; --gap: {{ ux.footer_gap_px }}px; --cols: {{ ux.footer_groups_per_row }};">
            <div class="footer-container">
                <div class="groups">
                    {# New groups (preferred) #}
                    {% if ux.footer_groups.all %}
                        {% for g in ux.footer_groups.all %}
                            <section class="group">
                                <h3 class="font-semibold mb-2">{{ g.title }}</h3>
                                <ul class="space-y-1 text-sm">
                                    {% for link in g.links.all %}
                                        <li><a class="link link-hover" href="{{ link.url }}">{{ link.title }}</a></li>
                                    {% empty %}
                                        <li class="opacity-60 text-sm">No links</li>
                                    {% endfor %}
                                </ul>
                            </section>
                        {% endfor %}
                    {% else %}

                    {% endif %}
                </div>

                <div class="mt-6 flex flex-wrap gap-3">
                    {% for s in ux.social_links.all %}
                        <a class="btn btn-ghost btn-xs" href="{{ s.url }}" target="_blank"
                           rel="noopener">{{ s.label }}</a>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="border-t border-base-300 py-4 text-sm opacity-70">
            <div class="max-w-7xl mx-auto px-3">Â© {% now "Y" %} {{ request.site.site_name|default:'BISK' }}</div>
        </div>
    </footer>

    <style>
        /***** Layout driven by CSS variables so you can change values in Wagtail *****/
        .footer-grid {
            padding-left: var(--px);
            padding-right: var(--px);
            padding-top: var(--py);
            padding-bottom: var(--py);
        }

        .footer-container {
            max-width: 80rem;
            margin-left: auto;
            margin-right: auto;
        }

        .groups {
            display: grid;
            gap: var(--gap);
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        }

        @media (min-width: 1024px) {
            /* desktop: lock to N columns */
            .groups {
                grid-template-columns: repeat(var(--cols), minmax(0, 1fr));
            }
        }
    </style>
{% endwith %}