{% load wagtailsettings_tags wagtailimages_tags %}
{% get_settings use_default_site=True %}
{% with fs=settings.website.FooterSettings %}
    <footer class="mt-12 relative border-t border-base-300" role="contentinfo" aria-label="Site footer">
        {# Backgrounds / overlay #}
        {% if fs.bg_style == 'solid' and fs.bg_color %}
            <div class="absolute inset-0 -z-10" style="background: {{ fs.bg_color }}"></div>
        {% elif fs.bg_style == 'gradient' and fs.gradient_from and fs.gradient_to %}
            <div class="absolute inset-0 -z-10"
                 style="background: linear-gradient(135deg, {{ fs.gradient_from }}, {{ fs.gradient_to }})"></div>
        {% endif %}
        {% if fs.bg_style == 'image' and fs.bg_image %}
            <div class="absolute inset-0 -z-10">
                {% image fs.bg_image fill-2000x1000 class="w-full h-full object-cover" %}
            </div>
        {% endif %}
        {% if fs.overlay_color and fs.overlay_opacity %}
            <div class="absolute inset-0 -z-10"
                 style="background: {{ fs.overlay_color }}; opacity: calc({{ fs.overlay_opacity }} / 100);"></div>
        {% endif %}

        <div class="{% if fs.container == 'container' %}max-w-7xl mx-auto{% endif %}">
            {# SECTION 1 #}
            {% if fs.s1_enabled %}
                <section class="footer-region {% if fs.s1_container == 'container' %}max-w-7xl mx-auto{% endif %}"
                         style="--cols-md: {{ fs.s1_cols_md }}; --cols-lg: {{ fs.s1_cols_lg }}; --gap: {{ fs.s1_gap }}px; --px: {{ fs.s1_pad_x }}px; --py: {{ fs.s1_pad_y }}px;">
                    <div class="region-inner">
                        <div class="region-grid">
                            {% for block in fs.s1_content %}{% include "partials/_footer_switch.html" %}{% endfor %}
                        </div>
                    </div>
                </section>
            {% endif %}

            {# SECTION 2 #}
            {% if fs.s2_enabled %}
                <section class="footer-region {% if fs.s2_container == 'container' %}max-w-7xl mx-auto{% endif %}"
                         style="--cols-md: {{ fs.s2_cols_md }}; --cols-lg: {{ fs.s2_cols_lg }}; --gap: {{ fs.s2_gap }}px; --px: {{ fs.s2_pad_x }}px; --py: {{ fs.s2_pad_y }}px;">
                    <div class="region-inner">
                        <div class="region-grid">
                            {% for block in fs.s2_content %}{% include "partials/_footer_switch.html" %}{% endfor %}
                        </div>
                    </div>
                </section>
            {% endif %}

            {# SECTION 3 #}
            {% if fs.s3_enabled %}
                <section class="footer-region {% if fs.s3_container == 'container' %}max-w-7xl mx-auto{% endif %}"
                         style="--cols-md: {{ fs.s3_cols_md }}; --cols-lg: {{ fs.s3_cols_lg }}; --gap: {{ fs.s3_gap }}px; --px: {{ fs.s3_pad_x }}px; --py: {{ fs.s3_pad_y }}px;">
                    <div class="region-inner">
                        <div class="region-grid">
                            {% for block in fs.s3_content %}{% include "partials/_footer_switch.html" %}{% endfor %}
                        </div>
                    </div>
                </section>
            {% endif %}

            {# SECTION 4 #}
            {% if fs.s4_enabled %}
                <section class="footer-region {% if fs.s4_container == 'container' %}max-w-7xl mx-auto{% endif %}"
                         style="--cols-md: {{ fs.s4_cols_md }}; --cols-lg: {{ fs.s4_cols_lg }}; --gap: {{ fs.s4_gap }}px; --px: {{ fs.s4_pad_x }}px; --py: {{ fs.s4_pad_y }}px;">
                    <div class="region-inner">
                        <div class="region-grid">
                            {% for block in fs.s4_content %}{% include "partials/_footer_switch.html" %}{% endfor %}
                        </div>
                    </div>
                </section>
            {% endif %}
        </div>

        <style>
            .footer-region {
                padding-left: var(--px);
                padding-right: var(--px);
                padding-top: var(--py);
                padding-bottom: var(--py);
            }

            .footer-region .region-grid {
                display: grid;
                gap: var(--gap);
                grid-template-columns: repeat(1, minmax(0, 1fr));
            }

            @media (min-width: 768px) {
                .footer-region .region-grid {
                    grid-template-columns: repeat(var(--cols-md), minmax(0, 1fr));
                }
            }

            @media (min-width: 1024px) {
                .footer-region .region-grid {
                    grid-template-columns: repeat(var(--cols-lg), minmax(0, 1fr));
                }
            }
        </style>
    </footer>
{% endwith %}